@page
@model PrivacyModel
@{ ViewData["Title"] = "Your Cart "; }
<h1>@ViewData["Title"]<i class="fas fa-shopping-cart"></i></h1>

<script>
    function fun() {
        var ref = document.getElementById("tbody");
        //console.log(localStorage);
        var i;
        var total = 0;
        console.log(localStorage.length);
        var j = 0;
        var k = localStorage.length;
        var len = sessionStorage['index'];
        for (i in localStorage) {
            if (j == k)
                break;
            var ite = localStorage[i];
            console.log(ite);
            var it = ite.split("+");
            total += parseInt(it[1]);
            console.log(it);
            var table = document.getElementById("table");
            var row = table.insertRow(j + 1);
            var cell2 = row.insertCell(0);
            var cell3 = row.insertCell(1);
            cell2.innerHTML = it[0];
            cell3.innerHTML = it[1];
            j += 1;
        }
        var t = document.getElementById("table");
        var r = t.insertRow(j + 1);
        var c1 = r.insertCell(0);
        var c2 = r.insertCell(1);
        r.colSpan = "2";
        c1.innerHTML = "Total";
        c2.innerHTML = "Rs " + total;
    }
    function fun2() {
        sessionStorage.clear();
        localStorage.clear();
    }
    function fun3() {
        if (localStorage.length == 0)
            alert("Cart is empty");
        else
            alert("order successful");
    }
</script>
<body onload="fun()" onabort="fun2()">

    <section>
        <div class="shadow p-3 mb-5 bg-white rounded main" id="main">
            <table class="table" id="table">
                <thead>
                    <tr>

                        <th scope="col">Dish</th>
                        <th scope="col">Price</th>

                    </tr>
                </thead>
                <tbody id="tb">
                </tbody>


            </table>


        </div>

    </section>
    <button class="btn btn-outline-success" id="order-btn" onclick="fun3()">Place your order</button>
</body>